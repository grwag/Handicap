<h3>{{'matchday' | translate}} <small *ngIf="matchday">{{matchday.date | date}}</small></h3>

<app-game-table *ngIf="matchday && matchday.isFinished"></app-game-table>
<div class="main-container">
    <mat-toolbar *ngIf="matchday && !matchday.isFinished" class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light box-shadow mb-3">
        <div class="container">
            <ul class="navbar-nav flex-grow">
                <li class="nav-item">
                    <a mat-stroked-button color="basic" (click)="addRemovePlayers()" class="nav-item"
                        [disabled]="matchday.isFinished">{{'addRemovePlayers' | translate}}</a>
                </li>
                <li class="nav-item">
                    <a mat-stroked-button color="primary" (click)="nextGame()" class="nav-item"
                        [disabled]="matchday.isFinished">{{'nextGame' | translate}} </a>
                </li>
            </ul>
        </div>
        <div class="navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse"*ngIf="matchday && !matchday.isFinished" >
            <ul class="navbar-nav flex-grow">
                <li class="nav-item">
                    <button mat-stroked-button color="accent" (click)="finishMatchday()" class="nav-item"
                        [disabled]="matchday.isFinished">{{'finishMatchday' | translate}}</button>
                </li>
            </ul>
        </div>
    </mat-toolbar>
    <mat-drawer-container>
        <mat-card *ngFor="let game of activeGames" [class.eightball]="game.type==7" [class.nineball]="game.type==9"
            [class.tenball]="game.type==8" [class.straightpool]="game.type==100">
            <form>
                <mat-form-field>
                    <input matInput #playerOnePoints value="0"
                        placeholder="{{game.playerOne.firstName | uppercase}} {{game.playerOne.lastName}} ({{game.playerOneRequiredPoints}})">
                </mat-form-field>
                <mat-form-field>
                    <input matInput #playerTwoPoints value="0"
                        placeholder="{{game.playerTwo.firstName | uppercase}} {{game.playerTwo.lastName}}  ({{game.playerTwoRequiredPoints}})">
                </mat-form-field>
                <button mat-raised-button color="primary"
                    (click)="saveGame(game.id,playerOnePoints.value,playerTwoPoints.value,game)">{{'save' | translate}}</button>
            </form>
        </mat-card>
        <mat-drawer *ngIf="matchday && !matchday.isFinished" #drawer mode="side" position="end" opened>
            <mat-card *ngFor="let game of finishedGames" [class.eightball]="game.type==7" [class.nineball]="game.type==9"
                [class.tenball]="game.type==8" [class.straightpool]="game.type==100" >
                <p>
                    <span [ngClass]="{won: isWinner(game, game.playerOne)}">{{game.playerOne.firstName | uppercase}}
                        {{game.playerOne.lastName}} </span>
                    <span class="points">{{game.playerOnePoints}} </span>
                    <span>({{game.playerOneRequiredPoints}}) </span>
                    <span> : </span>
                    <span class="points">{{game.playerTwoPoints}} </span>
                    <span>({{game.playerTwoRequiredPoints}}) </span>
                    <span [ngClass]="{won: isWinner(game, game.playerTwo)}">{{game.playerTwo.firstName | uppercase}}
                        {{game.playerTwo.lastName}} </span>
                </p>
            </mat-card>
        </mat-drawer>
    </mat-drawer-container>
</div>